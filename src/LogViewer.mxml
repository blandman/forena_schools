<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
				xmlns:s="library://ns.adobe.com/flex/spark" 
				xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"  xmlns:services="services.*"
			    width="100%" height="100%"
	>
  <services:RestXMLService id="logSvc"  debug="false"  defaultService="LogViewer" defaultMethod="recentLogs"  preload="true"  showProgress="true"/> 
  <fx:Script>
  	<![CDATA[
  	
  	public function refresh():void { 
  		logSvc.send(); 
  	}
	
	public function clearLogs():void { 
		logSvc.send({method:'clearLogs'}); 
	}
  		
  	]]>
  </fx:Script>
  <mx:TitleWindow  width="100%" height="100%"  title="Logs" paddingTop="10" paddingBottom="10" paddingLeft="10">
    <s:VGroup height="100%" width="100%">
    <mx:HDividedBox width="100%" height="100%">
    <mx:DataGrid id="logsGrid" width="100%" height="100%" dataProvider="{logSvc.xml.row}">
      <mx:columns>
        <mx:DataGridColumn headerText="User" dataField="login"/>
        <mx:DataGridColumn headerText="Time" dataField="log_time"/>
        <mx:DataGridColumn headerText="Type" dataField="msg_type"/>
        <mx:DataGridColumn headerText="Title" dataField="title"/> 
        <mx:DataGridColumn headerText="IP" dataField="ip"/> 
      </mx:columns>
    </mx:DataGrid>
		<s:VGroup width="100%" height="100%">
			<s:Label fontWeight="bold" text="{logsGrid.selectedItem.title}"/>
     		<mx:TextArea width="100%" height="100%"  htmlText="{logsGrid.selectedItem.message}"/>
		</s:VGroup>
    </mx:HDividedBox>
	<s:HGroup width="100%" horizontalAlign="left">		
	    <s:Button   label="Refresh" click="refresh()"/>
	    <s:Button label="Clear" click="clearLogs()"/>
	</s:HGroup>
   
    </s:VGroup>
  </mx:TitleWindow>
	
</mx:Application>
